package parser;

import java.io.UnsupportedEncodingException;

import api.APIFetcher;
import constants.BibieID;
import constants.BookID;

import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;

public class BibleParser 
{
	/** Fetches biblical content from the API and extracts the content body from the response */
	public static String parseChapter (BibieID translation, BookID book, int chapter) throws UnsupportedEncodingException
	{
		StringBuilder content = new StringBuilder (APIFetcher.fetchVerses(translation, book, chapter));
		
		JsonElement tree = JsonParser.parseString(content.toString());
		
		if (tree.isJsonObject())
		{
			JsonObject parsed = tree.getAsJsonObject();
			return ((JsonObject) parsed.get("data")).get("content").toString();
		}
		return content.toString();
	}
}
